<div class="dashboard-header mb-4">
  <h1 class="display-5">Welcome, {{user.username}}!</h1>
  <p class="lead">Here's your financial overview</p>
</div>

<!-- Summary Cards -->
<div class="row g-4 mb-4">
  <div class="col-md-4">
    <div class="card text-white bg-success h-100">
      <div class="card-body">
        <h5 class="card-title">Total Income</h5>
        <h2 class="card-text">${{totalIncome}}</h2>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card text-white bg-danger h-100">
      <div class="card-body">
        <h5 class="card-title">Total Expenses</h5>
        <h2 class="card-text">${{totalExpenses}}</h2>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card text-white {{#if isSavingsPositive}}bg-primary{{else}}bg-warning{{/if}} h-100">
      <div class="card-body">
        <h5 class="card-title">Total Savings</h5>
        <h2 class="card-text">${{totalSavings}}</h2>
      </div>
    </div>
  </div>
</div>

{{!-- this will display current month insights --}}
<div class="alert alert-info mb-4">
  <h5 class="alert-heading">ðŸ“Š Current Month Insight</h5>
  <p class="mb-0">{{insightMessage}}</p>
  <hr>
  <p class="mb-0"><strong>Current Month Savings:</strong> ${{currentMonthSavings}}</p>
</div>

<!-- this is chart Section -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card shadow">
      <div class="card-header bg-primary text-white">
        <h5 class="mb-0">Monthly Income vs Expenses</h5>
      </div>
      <div class="card-body">
        <canvas id="monthlyChart" height="100"></canvas>
      </div>
    </div>
  </div>
</div>

<!-- Quick Actions -->
<div class="row g-3">
  <div class="col-md-6">
    <div class="card h-100">
      <div class="card-body text-center">
        <h5 class="card-title">Manage Expenses</h5>
        <p class="card-text">Add, edit, or delete your expenses</p>
        <a href="/expenses" class="btn btn-danger">Go to Expenses</a>
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card h-100">
      <div class="card-body text-center">
        <h5 class="card-title">Manage Paychecks</h5>
        <p class="card-text">Add, edit, or delete your income records</p>
        <a href="/paychecks" class="btn btn-success">Go to Paychecks</a>
      </div>
    </div>
  </div>
</div>

<script>
  // Chart.js data
  const ctx = document.getElementById('monthlyChart').getContext('2d');
  const months = {{{json months}}};
  const incomeData = {{{json incomeData}}};
  const expenseData = {{{json expenseData}}};
//this will create Bar Chart
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: months,
      datasets: [
        {
          label: 'Income',
          data: incomeData,
          backgroundColor: 'rgba(40, 167, 69, 0.8)',
          borderColor: 'rgba(40, 167, 69, 1)',
          borderWidth: 1
        },
        {
          label: 'Expenses',
          data: expenseData,
          backgroundColor: 'rgba(220, 53, 69, 0.8)',
          borderColor: 'rgba(220, 53, 69, 1)',
          borderWidth: 1
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: true,
      scales: {
        y: {
          beginAtZero: true,
          ticks: {
            callback: function(value) {
              return '$' + value.toFixed(2);
            }
          }
        }
      }
    }
  });
</script>
